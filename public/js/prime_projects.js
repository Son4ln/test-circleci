!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}({1:function(e,t,i){e.exports=i("Baes")},Baes:function(e,t){var i="expiration_date";function r(e){for(var t=[],i=0;i<e.length;i++)t.push({name:e[i].name,path:e[i].path});return JSON.stringify(t)}function a(){preview="",null!=$("#industry_of_owner").val()&&(preview+=" 業種："+$("#industry_of_owner").children("option").filter(":selected").text()),""!=$("#corporate_name_of_owner").val()&&(preview+=", 法人名："+$("#corporate_name_of_owner").val()),""!=$("#url_of_owner").val()&&(preview+=", ＵＲＬ："+$("#url_of_owner").val()),$(".preview_owner span:first").text(w(preview)),h()}function n(){preview=$("#tell_about_movie_31").val(),""!=$("#tell_about_movie_32").val()&&(""!=preview&&(preview+=", "),preview+=$("#tell_about_movie_32").val()),""!=$("#tell_about_movie_33").val()&&(""!=preview&&(preview+=", "),preview+=$("#tell_about_movie_33").val()),$(".preview_tell_about_movie_3 span:first").text(w(preview)),h()}function o(e,t){var i="";""!=e&&""!=t&&(i=e+"～"+t+"秒"),$(".preview_movie_scale span:first").text(w(i)),h()}function l(){""==$("#lower_limit").val()&&$("#lower_limit").val(15),""==$("#upper_limit").val()&&$("#upper_limit").val(21),function(e){if(e){if(!$.isNumeric(e.value))return e.focus(),o("",""),!1;var t=parseInt($("#lower_limit").val()),i=parseInt($("#upper_limit").val());if(t<0||i<0)return e.focus(),o("",""),!1;if(t<1||60<i)return e.focus(),o("",""),!1;if(i<t)return e.focus(),o("",""),!1}$(function(){$("#slider-range").slider({range:!0,min:1,max:60,values:[$("#lower_limit").val(),$("#upper_limit").val()],slide:function(e,t){var i=t.values[0],r=t.values[1];$("#lower_limit").val(i),$("#upper_limit").val(r),o($("#lower_limit").val(),$("#upper_limit").val())}})}),o($("#lower_limit").val(),$("#upper_limit").val())}()}function s(e,t){preview="",$(".bind_"+e+" input[type='checkbox']:checked").each(function(){$(this).parent().addClass(t),txt=$(this).next().text(),""!=txt&&(delimiter=""==preview?"":",",preview+=delimiter+txt)}),$(".bind_"+e+" input[type='radio']:checked").each(function(){txt=$(this).next().text(),""!=txt&&(delimiter=""==preview?"":",",preview+=delimiter+txt)}),e==p&&""!=$("#aspect_ratio_another").val()&&(""!=preview&&(preview+=","),preview+=$("#aspect_ratio_another").val()),$(".preview_"+e+" span:first").text(w(preview)),h()}$("#project-form").submit(function(e){0}),$.fn.dropFile=function(e){return $(this).each(function(){var t=$(this),i=[],a=new qq.s3.FineUploader({element:document.getElementById(t.prop("id")),request:{endpoint:"https://"+bucketName+".s3-accelerate.amazonaws.com",accessKey:accessKey},signature:{endpoint:"/s3",customHeaders:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},chunking:{partSize:20971520},validation:{sizeLimit:5368709120},uploadSuccess:{endpoint:"/s3/success"},objectProperties:{key:function(e){return"prime-project/"+a.getName(e)},acl:"public-read"},deleteFile:{enabled:!0,endpoint:"/s3/delete",customHeaders:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},cors:{expected:!0},callbacks:{onProgress:function(e,t,i,r){loading=!0},onAllComplete:function(t,a){loading=!1,$(e.input).val(r(i))},onComplete:function(e,t,r){if(r.success){var a=r.tempLink.split("?")[0];i.push({id:e,name:t,path:a})}},onDelete:function(t){$.each(i,function(e){i[e].id!=t||i.splice(e,1)}),$(e.input).val(r(i))}}})})},$('[data-change="business"]').change(function(){a()}),$('[data-change="keyword"]').change(function(){n()});var p="aspect_ratio",c="project_name",u="delivery_date",_="reference_information",d="criterion_of_creative",v="label-back-on";function h(){var e=!0;$("#preview_table td").each(function(){if($(this).hasClass("preview_expiration_date")){if($('input[name="is_expiration_undecided"]').prop("checked"))return $(this).children("a").css("color","#333"),void $(this).children("span:first").text("未定");x($("#expiration_date").val())?$(this).children("span:first").text($("#expiration_date").val()):$(this).children("span:first").text("")}var t;if(!$(this).hasClass("preview_tell_about_movie_3")&&(!$(this).hasClass("preview_reference_information")&&!($(this).hasClass("preview_criterion_of_creative")||$(this).hasClass("preview_close_to_image")&&$(this).has("img"))))return""==$(this).children("span:first").text()?($(this).children("a").css("color","red"),e=!1):$(this).children("a").css("color","#333"),$(this).hasClass("preview_owner")?(t=$("#url_of_owner").val(),void(new RegExp(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/).test(t)&&""!=$("#corporate_name_of_owner").val()&&null!=$("#industry_of_owner").val()?$(this).children("a").css("color","#333"):($(this).children("a").css("color","red"),e=!1))):void 0}),3e3<$(".preview_tell_about_movie_detail span:first").text().length||""==$(".preview_tell_about_movie_detail span").text().trim()?($("#preview_tell_about_movie_detail_pencil").css("color","red"),e=!1):$("#preview_tell_about_movie_detail_pencil").css("color","#333"),e&&$("button[type='submit']").prop("disabled",!1)}function f(e,t){$(".bind_"+e+" input[type='radio']").change(function(i){if(s(e,t),$(this).is(":checked")&&($(".bind_"+e+" input[type='radio']").parent().removeClass(t),$(this).parent().addClass(t),"close_to_image"==e&&($(".bind_"+e+" input[type='radio']").parent().parent().removeClass(t),$(this).parent().parent().addClass(t),$img=$(this).siblings("img").clone(),$img.attr("width",300),$img.attr("height",200),$(".preview_"+e).html($img)),"purpose"==e)){var r=$(this).parent().text()+"を獲得するのは何ですか？";$(".purposetext").text(r)}})}function m(e,t){$(".bind_"+e+" input[type='checkbox']").change(function(r){s(e,t),h(),1==$(this).prop("checked")?($(this).parent().addClass(t),e==u&&$("#delivery_date").prop("disabled",!0),e==i&&$("#expiration_date").prop("disabled",!0)):($(this).parent().removeClass(t),e==u&&($("#delivery_date").prop("disabled",!1),$("#"+e).trigger("change")),e==i&&($("#expiration_date").prop("disabled",!1),$("#expiration_date").trigger("change")))})}function g(e,t){$("#"+e).change(function(r){var a=t;""!=$(this).val()&&(a=$(this).val()),$(".preview_"+e+" span:first").text(w(a)),e==i&&(x($("#"+e).val())?$("#expired_at_error").text(""):$("#expired_at_error").text($("#expired_at_error").data("message"))),h()})}function w(e){return"string"!=typeof e?e:e.replace(/[&'`"<>]/g,function(e){return{"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e]})}function x(e){var t,i=new Date,r=540+i.getTimezoneOffset(),a=new Date(i.valueOf()+6e4*r);t=30,a=new Date(a.getTime()+24*t*60*60*1e3);var n=new Date(e);return n>i&&n<a}f("purpose",v),g("tell_about_movie_1",""),g("tell_about_movie_2",""),g("tell_about_movie_detail",""),f("close_to_image",v),f(p,v),m(i,v),$("#aspect_ratio_another").change(function(){$(".bind_aspect_ratio input[type='checkbox']").trigger("change")}),g(c,""),$.datepicker.setDefaults($.datepicker.regional.ja),$("#"+u).datepicker(),$("#expiration_date").datepicker({dateFormat:"yy/mm/dd"}),g(u,""),m(u,v),g(_,""),g(d,""),g(i,""),$(document).ready(function(){$('a[href^="#"].scrollarrow-blue50, a[href^="#"].scrollarrow-blue80').click(function(){var e=$(this).attr("href"),t=$("#"==e||""==e?"html":e),i=t.offset().top-25;return $("body,html").animate({scrollTop:i},700,"swing"),!1}),$("input[type='radio']").trigger("change"),$("input[type='checkbox']").trigger("change"),a(),n(),$("textarea").trigger("change"),$("#"+c).trigger("change"),$("#"+_).trigger("change"),$("#"+d).trigger("change"),""!=$("#"+u).val()?$("#"+u).trigger("change"):$(".bind_"+u+" input[type='checkbox']").trigger("change"),""!=$("#expiration_date").val()?$("#expiration_date").trigger("change"):$(".bind_"+i+" input[type='checkbox']").trigger("change"),h(),l(),$("#project-form").on("click",'button[type="submit"]',function(e){if(e.preventDefault(),$(this).prop("disabled"))return!1;$(this).parent().find('input[name="status"]').val($(this).attr("data-state")),$("#project-form").submit()})})}});